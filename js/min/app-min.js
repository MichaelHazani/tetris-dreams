Physijs.scripts.worker="./js/physijs_worker.js",Physijs.scripts.ammo="./ammo.js";var init,render,renderer,scene,camera,box,lights,lights2,lights3,lights4,brick1,brick1loader,brick2,brick2loader,brick3,brick3loader,brick4,brick4loader,brick5,brick5loader,sphere,plane,particleGroup,emitter,clock,FPC,controls,composer,bokeh,raycaster=new THREE.Raycaster,mouse=new THREE.Vector2,width=window.innerWidth,height=window.innerHeight,hits=0,level=1,controlsEnabled=!1,moveForward=!1,moveBackward=!1,moveLeft=!1,moveRight=!1,canJump=!1,prevTime=performance.now(),velocity=new THREE.Vector3,listener=new THREE.AudioListener,n1,n2,n3,n4,n5,n6,n7,n8,bgAud,bgAud2,gravity=-20,multiplier=100,fadeTime=8,crashToll=0,crashedArr=[],freezeArray=[],manager=new THREE.LoadingManager,timelyMake,isPaused=!1,isDead=!1,isIntro=!0,times=0,maxTimes=500,dropInterval=3e3,havePointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;if(havePointerLock){var element=document.body,pointerlockchange=function(e){document.pointerLockElement===element||document.mozPointerLockElement===element||document.webkitPointerLockElement===element?(controlsEnabled=!0,controls.enabled=!0):controls.enabled=!1},pointerlockerror=function(e){};document.addEventListener("pointerlockchange",pointerlockchange,!1),document.addEventListener("mozpointerlockchange",pointerlockchange,!1),document.addEventListener("webkitpointerlockchange",pointerlockchange,!1),document.addEventListener("pointerlockerror",pointerlockerror,!1),document.addEventListener("mozpointerlockerror",pointerlockerror,!1),document.addEventListener("webkitpointerlockerror",pointerlockerror,!1),document.body.addEventListener("click",function(e){if(element.requestPointerLock=element.requestPointerLock||element.mozRequestPointerLock||element.webkitRequestPointerLock,element.exitPointerLock=element.exitPointerLock||element.mozExitPointerLock||element.webkitExitPointerLock,/Firefox/i.test(navigator.userAgent)){var t=function(e){(document.fullscreenElement===element||document.mozFullscreenElement===element||document.mozFullScreenElement===element)&&(document.removeEventListener("fullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),element.requestPointerLock())};document.addEventListener("fullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),element.requestFullscreen=element.requestFullscreen||element.mozRequestFullscreen||element.mozRequestFullScreen||element.webkitRequestFullscreen,element.requestFullscreen()}else element.requestPointerLock()},!1)}else document.body.innerHTML="Your browser doesn't seem to support Pointer Lock API";var notesArr=["./audio/1.ogg","./audio/2.ogg","./audio/3.ogg","./audio/4.ogg","./audio/5.ogg","./audio/6.ogg","./audio/7.ogg","./audio/8.ogg"];init=function(){function e(e){$(p).text(e),$(p).fadeIn(3e3),$(p).fadeOut(1500)}function t(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),d.style.top=window.innerHeight/2+"px",d.style.left=window.innerWidth/2+"px",c.style.top=window.innerHeight-50+"px",c.style.left=window.innerWidth/2+"px"}function a(){setTimeout(function(){var e=2*Math.round(Math.random())-1,t=2*Math.round(Math.random())-1,a=e*Math.floor(Math.random()*multiplier+1),o=t*Math.floor(Math.random()*multiplier+1),n=new THREE.Audio(listener);n.setRefDistance(30),n.autoplay=!0,brick5loader.load("./JSON/R-shape.json",function(e){var t=new Physijs.BoxMesh(e,new THREE.MeshPhongMaterial({color:39168,wireframe:!1}));t.scale.set(2,2,2),t.position.y=100,t.position.x=a,t.position.z=o,t.rotation.x=a,t.rotation.y=o,t.rotation.z=a,t.add(n),n.load(notesArr[Math.floor(7*Math.random())]),t.name="brick",scene.add(t)})},2e3)}function o(){setTimeout(function(){var e=2*Math.round(Math.random())-1,t=2*Math.round(Math.random())-1,a=e*Math.floor(Math.random()*multiplier+1),o=t*Math.floor(Math.random()*multiplier+1),n=new THREE.Audio(listener);n.setRefDistance(30),n.autoplay=!0,brick5loader.load("./JSON/cube.json",function(e){var t=new Physijs.BoxMesh(e,new THREE.MeshPhongMaterial({color:128,wireframe:!1}));t.scale.set(2,2,2),t.position.y=100,t.position.x=a,t.position.z=o,t.rotation.x=a,t.rotation.y=o,t.rotation.z=a,t.name="brick",n.load(notesArr[Math.floor(7*Math.random())]),scene.add(t)})},2e3)}function n(){setTimeout(function(){var e=2*Math.round(Math.random())-1,t=2*Math.round(Math.random())-1,a=e*Math.floor(Math.random()*multiplier+1),o=t*Math.floor(Math.random()*multiplier+1),n=new THREE.Audio(listener);n.setRefDistance(30),n.autoplay=!0,brick5loader.load("./JSON/squiggly.json",function(e){var t=new Physijs.BoxMesh(e,new THREE.MeshPhongMaterial({color:32896,wireframe:!1}));t.scale.set(2,2,2),t.position.y=100,t.position.x=a,t.position.z=o,t.rotation.x=a,t.rotation.y=o,t.rotation.z=a,t.name="brick",n.load(notesArr[Math.floor(7*Math.random())]),scene.add(t)})},2e3)}function i(){setTimeout(function(){var e=2*Math.round(Math.random())-1,t=2*Math.round(Math.random())-1,a=e*Math.floor(Math.random()*multiplier+1),o=t*Math.floor(Math.random()*multiplier+1),n=new THREE.Audio(listener);n.setRefDistance(30),n.autoplay=!0,brick5loader.load("./JSON/pedestal.json",function(e){var t=new Physijs.BoxMesh(e,new THREE.MeshPhongMaterial({color:13789470,wireframe:!1}));t.scale.set(2,2,2),t.position.y=100,t.position.x=a,t.position.z=o,t.rotation.x=a,t.rotation.y=o,t.rotation.z=a,t.name="brick",n.load(notesArr[Math.floor(7*Math.random())]),scene.add(t)})},2e3)}function r(){setTimeout(function(){var e=2*Math.round(Math.random())-1,t=2*Math.round(Math.random())-1,a=e*Math.floor(Math.random()*multiplier+1),o=t*Math.floor(Math.random()*multiplier+1),n=new THREE.Audio(listener);n.setRefDistance(30),n.autoplay=!0,brick5loader.load("./JSON/longline.json",function(e){var t=new Physijs.BoxMesh(e,new THREE.MeshPhongMaterial({color:8388608,wireframe:!1}));t.scale.set(2,2,2),t.position.y=100,t.position.x=a,t.position.z=o,t.rotation.x=a,t.rotation.y=o,t.rotation.z=a,t.name="brick",n.load(notesArr[Math.floor(7*Math.random())]),scene.add(t)})},2e3)}function s(){var e=new THREE.TextureLoader;particleGroup=new SPE.Group({texture:{value:e.load("./images/star1.png")},fog:!1,maxParticleCount:3e4}),emitter=new SPE.Emitter({type:SPE.distributions.SPHERE,maxAge:4,position:{value:new THREE.Vector3(0,100,0),spread:new THREE.Vector3(1e3,30,1e3)},opacity:[.9],size:{value:[0,1,0]},particleCount:3e4,isStatic:!1}),particleGroup.addEmitter(emitter),scene.add(particleGroup.mesh)}manager.onProgress=function(e,t,a){console.log(e,t,a)},clock=new THREE.Clock,renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(0),document.body.appendChild(renderer.domElement),scene=new Physijs.Scene,scene.setGravity(new THREE.Vector3(0,gravity,0)),bgAud=new Audio("./audio/theme.ogg"),bgAud.addEventListener("ended",function(){this.currentTime=0,this.play(),this.volume=1},!1),bgAud.volume=1,bgAud2=new Audio("./audio/shepard.ogg"),bgAud2.addEventListener("ended",function(){this.currentTime=0,this.play(),this.volume=0},!1),bgAud2.volume=0,bgAud2.currentTime=30,camera=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,1e3),camera.position.set(0,0,10),scene.add(camera),camera.add(listener);var l=new THREE.Fog(16777215,1,1e3);controls=new THREE.PointerLockControls(camera),scene.add(controls.getObject());var d=document.createElement("img");d.src="./images/crosshair.png",d["class"]="chair",d.style.position="absolute",document.body.appendChild(d),d.style.top=window.innerHeight/2+"px",d.style.left=window.innerWidth/2+"px";var c=document.createElement("div");c["class"]="hitcounter",c.style.position="absolute",c.style.top=window.innerHeight-50+"px",c.style.left=window.innerWidth/2+"px",c.style.color="#fff",c.style.fontFamily="Raleway",c.style.fontWeight="100",c.style.fontSize="2rem",document.body.appendChild(c),$(c).text(hits),c.style.display="none";var p=document.createElement("div");p["class"]="levelcounter",p.style.position="absolute",p.style.top=window.innerHeight/2+"px",p.style.left=window.innerWidth/2+"px",p.style.color="#fff",p.style.width=window.innerWidth/3+"px",p.style.height=window.innerHeight/3+"px",p.style.marginLeft=-1*window.innerWidth/6+"px",p.style.marginTop=-1*window.innerHeight/1.4+"px",p.style.fontFamily="Raleway",p.style.fontWeight="100",p.style.fontSize="40rem",p.style.textAlign="center",p.style.color="#333",document.body.appendChild(p),$(p).text(level),$(p).hide();var m=document.createElement("div");m["class"]="blackScreen",m.style.position="absolute",m.zIndex=134,m.style.top="0px",m.style.left="0px",m.style.backgroundColor="black",m.style.width=window.innerWidth+"px",m.style.height=window.innerHeight+"px",m.style.margin=0,m.style.color="white",m.style.opacity=0,m.style.textAlign="center";var h=document.createElement("div");h.innerHTML="<p class='p1d' style='opacity:0'>You almost made it.</p><p class='p2d' style='opacity:0'>Just one more level.</p><br><br><p class='p3d' style='opacity:0'>Try again?</p><p class='p4d' style='opacity:0'>I bet you'll beat it this time.</p><p class='p5d' style='opacity:0'>What's the harm?</p><div class='p5d' id='links' style='opacity: 0; width: 100%; position: absolute; float: right; bottom: 35px; line-height: 1em; font-size:0.7em; font-family:helvetica; color: #ccc'>&#169 2016 Michael Hazani <br> <a href='http://michaelhazani.com' alt='Michael Hazani's website' target='_blank' style='text-decoration:none; color:#ccc;'>website</a> | <a href='https://github.com/MichaelHazani/tetris-horror' alt='Hazani's Github' target='_blank' style='text-decoration:none; color:#ccc;'>GitHub</a></div>",h.style.fontSize="1em",h.style.textAlign="center",h.style.lineHeight="4rem",h.style.marginTop="2%",h.style.marginLeft="20px",h.style.position="absolute",h.style.top="0px",h.style.backgroundColor="black",h.style.color="white",h.style.width=window.innerWidth+"px",h.style.height=window.innerHeight+"px",m.appendChild(h);var u=document.createElement("div");u["class"]="introScreen",u.style.position="absolute",u.zIndex=134,u.style.top="0px",u.style.left="0px",u.style.backgroundColor="black",u.style.width=window.innerWidth+"px",u.style.height=window.innerHeight+"px",u.style.margin=0,u.style.color="white";var E=document.createElement("div");E.innerHTML="<div><p class='1p' style='opacity: 0'>\"...But nowadays, the populace at large isn't aware of our discoveries since we first encountered the Tetris Effect - <br>chronic, virtually irreversible phenomena such as neural hijacking, pattern-oriented compulsive obsessions or post-Pavlovian conditioning...</p><br><p class='2p' style='opacity: 0'>No one wants to be told about thousands of cases, women and men around the world <br> who spend their lives confined to padded cells, doomed to play a neverending game in their heads ad infinitum, <br> sans loved ones, sans thought, sans sleep...\" </p></div><br><br><span id='credits' class='3p' style='float:right; font-style: italic; margin-right:40px; opacity: 0'>A.L.Pajitnov, PhD, \"The Viral And The Virtual: Towards A New Pathology\"</span>",E.style.fontSize="1.1em",E.style.textAlign="left",E.style.lineHeight="4rem",E.style.marginTop="2%",E.style.marginLeft="20px",E.style.position="absolute",E.style.top="0px",E.style.backgroundColor="black",E.style.color="white",E.style.width=window.innerWidth+"px",E.style.height=window.innerHeight+"px",u.appendChild(E),element.appendChild(u);var w=function(e){switch(e.keyCode){case 38:case 87:e.preventDefault(),moveForward=!0;break;case 37:case 65:moveLeft=!0;break;case 40:case 83:moveBackward=!0;break;case 39:case 68:moveRight=!0;break;case 32:canJump===!0&&(velocity.y+=200),canJump=!1;break;case 80:isPaused=!isPaused}},y=function(e){switch(e.keyCode){case 38:case 87:moveForward=!1;break;case 37:case 65:moveLeft=!1;break;case 40:case 83:moveBackward=!1;break;case 39:case 68:moveRight=!1}};document.addEventListener("keydown",w,!1),document.addEventListener("keyup",y,!1),window.addEventListener("resize",t,!1),brick1loader=brick2loader=brick3loader=brick4loader=brick5loader=new THREE.JSONLoader,timelyMake=setInterval(function(){function e(e){switch(e){case 1:a();break;case 2:o();break;case 3:n();break;case 4:i();break;case 5:r()}}if(!isPaused&&!isDead&&!isIntro){var t=Math.round(5*Math.random())+1;e(t%3==0?1:t%4==0?2:t%5==0?3:t%2==0?4:5),times++,times>=maxTimes&&clearInterval(timelyMake)}},dropInterval);var g=function(e){isDead=!0,document.exitPointerLock(),$(bgAud2).animate({volume:0},2e3),bgAud.currentTime=0,bgAud.volume=1,bgAud.play(),element.appendChild(m),$(m).animate({opacity:1},2e3),$(".p1d").animate({opacity:1},1e4),$(".p2d").animate({opacity:1},2e4),$(".p3d").animate({opacity:1},3e4),$(".p4d").animate({opacity:1},5e4),$(".p5d").animate({opacity:1},6e4),setTimeout(function(){window.addEventListener("mousedown",function(){location.reload()})},1e4)},T=10770263;plane=new Physijs.CylinderMesh(new THREE.CylinderGeometry(500,500,5,34),new THREE.MeshPhongMaterial({color:T}),0),plane.rotation.x=Math.PI,plane.position.set(0,0,0),plane.name="plane",plane.addEventListener("collision",function(e){e.dead||(e.dead=!0,crashedArr.push(e),crashToll++),crashToll>11-2*level&&g(level)}),scene.add(plane),lights=new THREE.PointLight(16777215,.5),lights.position.set(150,200,150),scene.add(lights),lights2=new THREE.PointLight(16777215,.5),lights2.position.set(150,200,-150),scene.add(lights2),lights3=new THREE.PointLight(16777215,.5),lights3.position.set(-150,200,150),scene.add(lights3),lights4=new THREE.PointLight(16777215,.5),lights4.position.set(-150,200,-150),scene.add(lights4),requestAnimationFrame(render);var v=new THREE.BoxGeometry(700,700,700),H=[],f=new THREE.TextureLoader;H.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides1.jpg"),side:THREE.DoubleSide,transparent:!0,needsUpdate:!0}));var f=new THREE.TextureLoader;H.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides1.jpg"),side:THREE.DoubleSide,transparent:!0,needsUpdate:!0}));var f=new THREE.TextureLoader;H.push(new THREE.MeshBasicMaterial({map:f.load("./images/top1.jpg"),side:THREE.DoubleSide,transparent:!0,needsUpdate:!0}));var f=new THREE.TextureLoader;H.push(new THREE.MeshBasicMaterial({map:f.load("./images/bottom1.jpg"),side:THREE.DoubleSide,transparent:!0,needsUpdate:!0}));var f=new THREE.TextureLoader;H.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides1.jpg"),side:THREE.DoubleSide,transparent:!0,needsUpdate:!0}));var f=new THREE.TextureLoader;H.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides1.jpg"),side:THREE.DoubleSide,transparent:!0,needsUpdate:!0}));var R=new THREE.MeshFaceMaterial(H),b=new THREE.Mesh(v,R);b.position.y=250,scene.add(b);var M=new THREE.BoxGeometry(740,740,740),k=[],f=new THREE.TextureLoader;k.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides2.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;k.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides2.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;k.push(new THREE.MeshBasicMaterial({map:f.load("./images/top2.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;k.push(new THREE.MeshBasicMaterial({map:f.load("./images/bottom2.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;k.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides2.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;k.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides2.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var x=new THREE.MeshFaceMaterial(k),L=new THREE.Mesh(M,x);L.position.y=245,scene.add(L);var P=new THREE.BoxGeometry(720,720,720),j=[],f=new THREE.TextureLoader;j.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides3.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;j.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides3.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;j.push(new THREE.MeshBasicMaterial({map:f.load("./images/top3.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;j.push(new THREE.MeshBasicMaterial({map:f.load("./images/bottom3.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;j.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides3.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;j.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides3.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var B=new THREE.MeshFaceMaterial(j),A=new THREE.Mesh(P,B);A.position.y=245,scene.add(A);var z=new THREE.BoxGeometry(760,760,760),S=[],f=new THREE.TextureLoader;S.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides4.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;S.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides4.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;S.push(new THREE.MeshBasicMaterial({map:f.load("./images/top4.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;S.push(new THREE.MeshBasicMaterial({map:f.load("./images/bottom4.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;S.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides4.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var f=new THREE.TextureLoader;S.push(new THREE.MeshBasicMaterial({map:f.load("./images/sides4.jpg"),side:THREE.BackSide,transparent:!0,opacity:0}));var C=new THREE.MeshFaceMaterial(S),F=new THREE.Mesh(z,C);F.position.y=245,scene.add(F),s();var W=new THREE.BokehPass(scene,camera,{focus:1,aperture:.02,maxblur:1.02,width:width,height:height});W.renderToScreen=!0,composer=new THREE.EffectComposer(renderer),composer.addPass(new THREE.RenderPass(scene,camera)),composer.addPass(W),camera.lookAt(new THREE.Vector3(0,20,-100)),document.addEventListener("mousedown",function(){function e(){scene.remove(b),plane.material.color=new THREE.Color(16711935);for(var e=0;e<A.material.materials.length;e++)TweenLite.to(A.material.materials[e],3,{opacity:1})}function t(){scene.remove(A),plane.material.color=new THREE.Color(8650815);for(var e=0;e<L.material.materials.length;e++)TweenLite.to(L.material.materials[e],3,{opacity:1})}function a(){scene.remove(L),plane.material.color=new THREE.Color(4544102);for(var e=0;e<F.material.materials.length;e++)TweenLite.to(F.material.materials[e],3,{opacity:1})}var o=new THREE.Vector2;o.x=0,o.y=0,raycaster.setFromCamera(o,camera);for(var n=raycaster.intersectObjects(scene.children),i=0;i<n.length;i++)if("plane"==n[i].object.name||"Points"==n[i].object.type||n[i].object.dead||(n[i].object.material.wireframe=!0,n[i].object.dead=!0,freezeArray.push(n[i].object),hits++,$(c).text(hits)),hits>=10*level){dropInterval-=600*level,multiplier+=45*level,gravity-=40,scene.setGravity(new THREE.Vector3(0,gravity,0)),crashToll=0;for(var i=0;i<crashedArr.length;i++)scene.remove(crashedArr[i]);switch(level){case 1:for(var i=0;i<b.material.materials.length;i++)TweenLite.to(b.material.materials[i],5,{opacity:0,onComplete:e});break;case 2:for(var i=0;i<A.material.materials.length;i++)TweenLite.to(A.material.materials[i],5,{opacity:0,onComplete:t});break;case 3:for(var i=0;i<L.material.materials.length;i++)TweenLite.to(L.material.materials[i],5,{opacity:0,onComplete:a})}level++}},!1),$(".1p").animate({opacity:1},1e4),$(".2p").animate({opacity:1},3e4),$(".3p").animate({opacity:1},6e4),bgAud.play(),$(u).click(function(){$(bgAud).animate({volume:0},1e3),setTimeout(function(){bgAud.stop()},1500),$(bgAud2).animate({volume:.5},6e3),$(u).fadeOut(2e3),setTimeout(function(){element.removeChild(u)},2e3),isIntro=!isIntro})},window.onerror=function(){return!0},render=function(){if(particleGroup.tick(clock.getDelta()),controlsEnabled){var e=performance.now(),t=(e-prevTime)/500;velocity.x-=10*velocity.x*t,velocity.z-=10*velocity.z*t,velocity.y-=9.8*100*t,moveForward&&(velocity.z-=400*t),moveBackward&&(velocity.z+=400*t),moveLeft&&(velocity.x-=400*t),moveRight&&(velocity.x+=400*t),controls.getObject().translateX(velocity.x*t),controls.getObject().translateY(velocity.y*t),controls.getObject().translateZ(velocity.z*t),controls.getObject().position.y<10&&(velocity.y=0,controls.getObject().position.y=10),prevTime=e}freezeArray.length>0&&freezeArray.forEach(function(e){e.__dirtyPosition=!0,e.__dirtyRotation=!0,e.setLinearVelocity(new THREE.Vector3(0,1.5,0)),e.setAngularVelocity(new THREE.Vector3(0,.2,0))}),requestAnimationFrame(render),isPaused?(bgAud2.pause(),document.exitPointerLock()):(havePointerLock||document.requestPointerLock(),bgAud2.play(),scene.simulate(),composer.render())},$(function(){init()});